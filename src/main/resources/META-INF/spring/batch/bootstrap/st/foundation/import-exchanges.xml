<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rabbit="http://www.springframework.org/schema/rabbit"
	xmlns:p="http://www.springframework.org/schema/p" xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:amqp="http://www.springframework.org/schema/integration/amqp"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
        http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
        http://www.springframework.org/schema/integration/amqp http://www.springframework.org/schema/integration/amqp/spring-integration-amqp.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd  
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<rabbit:queue name="${import.exchanges.queue}" />
	<rabbit:queue name="${import.exchanges.reply.queue}" />

	<rabbit:direct-exchange name="${import.exchanges.exchange}">
		<rabbit:bindings>
			<rabbit:binding queue="${import.exchanges.queue}"
				key="${import.exchanges.routing.key}" />
		</rabbit:bindings>
	</rabbit:direct-exchange>
	
	

	<rabbit:queue name="${import.ecls.queue}" />
	<rabbit:queue name="${import.ecls.reply.queue}" />

	<rabbit:direct-exchange name="${import.ecls.exchange}">
		<rabbit:bindings>
			<rabbit:binding queue="${import.ecls.queue}"
				key="${import.ecls.routing.key}" />
		</rabbit:bindings>
	</rabbit:direct-exchange>
	

	<!-- <beans:bean id="importExchangesListener" class="com.st.symfony.Foundation" 
		p:symfony-ref="symfony" p:replyTimeout="${import.exchanges.reply.timeout}" 
		/> <rabbit:queue name="${import.exchanges.queue}" /> <rabbit:queue name="${import.exchanges.reply.queue}" 
		/> <rabbit:direct-exchange name="${import.exchanges.exchange}"> <rabbit:bindings> 
		<rabbit:binding queue="${import.exchanges.queue}" key="${import.exchanges.routing.key}" 
		/> </rabbit:bindings> </rabbit:direct-exchange> <rabbit:listener-container 
		connection-factory="rabbitConnectionFactory" concurrency="${import.exchanges.listener.concurrency}" 
		requeue-rejected="false" prefetch="1"> <rabbit:listener queues="${import.exchanges.queue}" 
		ref="importExchangesListener" method="importExchange" /> </rabbit:listener-container> 
		<beans:beans profile="master"> <beans:bean id="importExchangeLbq" class="java.util.concurrent.LinkedBlockingQueue" 
		/> <beans:bean id="importExchangesReplyHandler" class="com.st.batch.foundation.ReplyHandler" 
		p:blockingQueue-ref="importExchangeLbq" /> <rabbit:listener-container connection-factory="rabbitConnectionFactory" 
		concurrency="1" requeue-rejected="false"> <rabbit:listener queues="${import.exchanges.reply.queue}" 
		ref="importExchangesReplyHandler" method="onMessage" /> </rabbit:listener-container> 
		</beans:beans> -->

</beans:beans>
